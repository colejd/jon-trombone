{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/gui.js","js/jon-trombone.js","js/main.js","js/midi/midi-controller.js","js/midi/midi-drop-area.js","js/pink-trombone/components/audio-system.js","js/pink-trombone/components/glottis.js","js/pink-trombone/components/tract-ui.js","js/pink-trombone/components/tract.js","js/pink-trombone/math-extensions.js","js/pink-trombone/noise.js","js/pink-trombone/pink-trombone.js","js/utils/model-loader.js","js/utils/webgl-detect.js","node_modules/midiconvert/build/MidiConvert.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","GUI","controller","dat","console","warn","gui","jon","add","trombone","jonGUI","addFolder","listen","min","max","voiceGUI","Glottis","tractGUI","Tract","step","TractUI","songGUI","midiController","_modelLoader","_pinkTrombone","_midiController","_midiDropArea","JonTrombone","container","_this","this","_classCallCheck","style","position","cursor","renderer","THREE","WebGLRenderer","alpha","setPixelRatio","window","devicePixelRatio","setSize","offsetWidth","offsetHeight","setClearColor","appendChild","domElement","aspect","camera","PerspectiveCamera","scene","Scene","clock","Clock","PinkTrombone","setTimeout","StartAudio","moveJaw","jawFlapSpeed","jawOpenOffset","legato","flapWhileSinging","MidiController","MidiDropArea","SetUpThree","SetUpScene","OnUpdate","undefined","OrbitControls","controls","target","set","update","_this2","light1","HemisphereLight","name","light2","DirectionalLight","ModelLoader","LoadJSON","object","rotation","y","Math","degToRad","jaw","skeleton","bones","find","obj","jawShutZ","z","getDelta","requestAnimationFrame","bind","playing","notes","GetPitches","lastNotes","note","freq","MIDIToFrequency","midi","UIFrequency","loudness","velocity","SetLipsClosed","time","getElapsedTime","percent","sin","render","_webglDetect","_jonTrombone","_gui","document","getElementById","Detector","HasWebGL","jonTrombone","Init","log","innerHTML","GetErrorHTML","classList","MidiConvert","currentTrack","baseFreq","path","callback","Stop","load","file","parse","trackIndex","arguments","GetSongProgress","tracks","item","noteOn","noteOff","filter","track","LoadSong","PlaySong","EnterSingMode","start","midiCode","pow","stop","ExitSingMode","backup_settings","autoWobble","addPitchVariance","addTensenessVariance","vibratoFrequency","dropArea","createElement","top","left","width","height","MakeDroppable","files","reader","FileReader","onload","LoadSongDirect","result","readAsBinaryString","element","triggerCallback","dataTransfer","input","setAttribute","display","addEventListener","preventDefault","stopPropagation","remove","AudioSystem","blockLength","blockTime","soundOn","AudioContext","webkitAudioContext","audioContext","sampleRate","scriptProcessor","createScriptProcessor","connect","destination","onaudioprocess","doScriptProcessor","whiteNoise","createWhiteNoiseNode","aspirateFilter","createBiquadFilter","type","frequency","value","Q","fricativeFilter","frameCount","myArrayBuffer","createBuffer","nowBuffering","getChannelData","random","source","createBufferSource","buffer","loop","event","inputArray1","inputBuffer","inputArray2","outArray","outputBuffer","j","N","lambda1","lambda2","glottalOutput","runStep","vocalOutput","lipOutput","noseOutput","finishBlock","disconnect","_noise","timeInWaveform","oldFrequency","newFrequency","smoothFrequency","oldTenseness","newTenseness","UITenseness","totalTime","vibratoAmount","intensity","isTouched","touch","x","keyboardTop","keyboardLeft","keyboardWidth","keyboardHeight","semitones","marks","baseNote","output","setupWaveform","alive","UI","touchesWithMouse","local_y","local_x","clamp","semitone","cos","PI","lambda","noiseSource","timeStep","waveformLength","out","normalizedLFWaveform","aspiration","sqrt","getNoiseModulator","_noise2","default","simplex1","voiced","vibrato","alwaysVoice","tenseness","Rd","Ra","Rk","Rg","Ta","Tp","Te","epsilon","shift","exp","Delta","RHSIntegral","totalLowerIntegral","totalUpperIntegral","omega","E0","originX","originY","radius","scale","tongueIndex","tongueDiameter","innerTongueControlRadius","outerTongueControlRadius","tongueTouch","angleScale","angleOffset","noseOffset","gridOffset","index","setRestDiameter","diameter","targetDiameter","restDiameter","tongueLowerIndexBound","bladeStart","tongueUpperIndexBound","tipStart","tongueIndexCentre","xx","yy","angle","atan2","lipStart","fixedTongueDiameter","curve","progress","_i","interp","lerp","R","L","reflection","junctionOutputR","junctionOutputL","maxAmplitude","newDiameter","A","glottalReflection","lipReflection","lastObstruction","fade","movementSpeed","transients","velumTarget","floor","Float64Array","newReflection","noseLength","noseStart","noseR","noseL","noseJunctionOutputR","noseJunctionOutputL","noseReflection","noseDiameter","noseA","noseMaxAmplitude","d","newReflectionLeft","newReflectionRight","newReflectionNose","calculateReflections","calculateNoseReflections","deltaTime","amount","newLastObstruction","slowReturn","moveTowards","addTransient","reflectionLeft","reflectionRight","reflectionNose","sum","turbulenceNoise","updateAmplitudes","processTransients","addTurbulenceNoise","w","amplitude","abs","reshapeTract","trans","timeAlive","lifeTime","strength","exponent","push","splice","delta","thinness0","openness","noise0","noise1","number","current","amountUp","amountDown","gaussian","c","b","Grad","Noise","grad3","p","perm","Array","gradP","seed","Date","now","_seed","v","xin","yin","n0","n1","n2","i1","j1","F2","G2","x0","y0","x1","y1","x2","y2","gi0","gi1","gi2","t0","dot2","t1","t2","simplex2","singleton","Object","freeze","_audioSystem","_glottis","_tract","_tractUi","noiseFreq","noiseQ","init","muted","startSound","doMute","mute","unmute","SetMute","modelInfo","loadedCallback","onProgress","xhr","lengthComputable","percentComplete","loaded","total","round","onError","mtlLoader","MTLLoader","setPath","mtlFile","materials","preload","objLoader","OBJLoader","setMaterials","objFile","JSONLoader","geometry","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","skinning","err","return","mesh","SkinnedMesh","MultiMaterial","manager","LoadingManager","FBXLoader","WebGLRenderingContext","canvas","names","context","getContext","getParameter","message","define","amd","id","m","defineProperty","instrumentByPatchID","instrumentFamilyByID","Midi","decode","then","create","replace","bpm","PPQ","test","cbb","cb","c#","cx","dbb","db","d#","dx","ebb","eb","e#","ex","fbb","fb","f#","fx","gbb","gb","g","g#","gx","abb","ab","a#","ax","bbb","bb","b#","bx","exec","toLowerCase","parseInt","cleanName","ticksToSeconds","isString","isNumber","isPitch","midiToPitch","pitchToMidi","BinaryInsert","TypeError","enumerable","configurable","writable","key","prototype","2","4","5","7","8","10","64","65","66","67","68","84","get","hasOwnProperty","Control","header","ticksPerBeat","subtype","timeSignature","numerator","denominator","microsecondsPerBeat","parseHeader","Uint32Array","Merge","__esModule","h","Promise","XMLHttpRequest","open","responseType","readyState","status","response","send","ArrayBuffer","Uint8Array","String","fromCharCode","apply","forEach","Track","text","noteNumber","controllerType","cc","instrument","patch","programNumber","File","ticks","addTrack","setTempo","encode","toBytes","charCodeAt","duration","map","slice","startTime","Note","controlChanges","instrumentNumber","match","findIndex","noteOns","addNoteOn","noteOffs","addNoteOff","indexOf","DEFAULT_VOLUME","DEFAULT_DURATION","DEFAULT_CHANNEL","midi_letter_pitches","midiPitchFromNote","substr","ensureMidiPitch","midi_pitches_letter","12","13","14","15","16","17","18","19","20","21","22","23","midi_flattened_notes","noteFromMidiPitch","mpqnFromBpm","unshift","bpmFromMpqn","codes2Str","str2Bytes","translateTickTime","channel","param1","setTime","setType","setChannel","setParam1","setParam2","param2","NOTE_OFF","NOTE_ON","AFTER_TOUCH","CONTROLLER","PROGRAM_CHANGE","CHANNEL_AFTERTOUCH","PITCH_BEND","setData","data","SEQUENCE","TEXT","COPYRIGHT","TRACK_NAME","INSTRUMENT","LYRIC","MARKER","CUE_POINT","CHANNEL_PREFIX","END_OF_TRACK","TEMPO","SMPTE","TIME_SIG","KEY_SIG","SEQ_EVENT","isArray","split","events","START_BYTES","END_BYTES","addEvent","addNote","addChord","chord","setInstrument","tempo","toString","concat","HDR_CHUNKID","HDR_CHUNK_SIZE","HDR_TYPE0","HDR_TYPE1","Util","Event","MetaEvent","read","readInt32","stream","readInt16","formatType","trackCount","eof","readVarInt","readInt8","frameRate","0","32","96","hour","sec","frame","subframe","metronome","thirtyseconds","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"jon-trombone.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\nexport class GUI {\n\n    /**\n     * Creates and attaches a GUI to the page if DAT.GUI is included.\n     */\n    static Init(controller){\n        if(typeof(dat) === \"undefined\"){\n            console.warn(\"No DAT.GUI instance found. Import on the page to use!\");\n            return;\n        }\n\n        var gui = new dat.GUI();\n\n        var jon = controller;\n\n        gui.add(jon.trombone, 'ToggleMute');\n\n        var jonGUI = gui.addFolder(\"Jon\");\n        jonGUI.add(jon, \"moveJaw\").listen();\n        jonGUI.add(jon, \"jawFlapSpeed\").min(0).max(100);\n        jonGUI.add(jon, \"jawOpenOffset\").min(0).max(1);\n\n        var voiceGUI = gui.addFolder(\"Voice\");\n        voiceGUI.add(jon.trombone, 'autoWobble');\n        voiceGUI.add(jon.trombone.Glottis, 'addPitchVariance').listen();\n        voiceGUI.add(jon.trombone.Glottis, 'addTensenessVariance').listen();\n        voiceGUI.add(jon.trombone.Glottis, 'UITenseness').min(0).max(1);\n        voiceGUI.add(jon.trombone.Glottis, 'vibratoAmount').min(0).max(0.5);\n        voiceGUI.add(jon.trombone.Glottis, 'UIFrequency').min(1).max(1000).listen();\n        voiceGUI.add(jon.trombone.Glottis, 'loudness').min(0).max(1).listen();\n\n        var tractGUI = gui.addFolder(\"Tract\");\n        tractGUI.add(jon.trombone.Tract, 'movementSpeed').min(1).max(30).step(1);\n        tractGUI.add(jon.trombone.Tract, 'velumTarget').min(0.001).max(2);\n        tractGUI.add(jon.trombone.TractUI, 'target').min(0.001).max(1);\n        tractGUI.add(jon.trombone.TractUI, 'index').min(0).max(43).step(1);\n        tractGUI.add(jon.trombone.TractUI, 'radius').min(0).max(5).step(1);\n\n        var songGUI = gui.addFolder(\"midi\");\n        songGUI.add(jon.midiController, 'PlaySong');\n        songGUI.add(jon.midiController, 'Stop');\n        songGUI.add(jon.midiController, 'Restart');\n        songGUI.add(jon.midiController, 'currentTrack').min(0).max(20).step(1).listen();\n        songGUI.add(jon.midiController, 'baseFreq').min(1).max(2000);\n        songGUI.add(jon, 'flapWhileSinging');\n        songGUI.add(jon, 'legato').listen();\n    }\n\n}","import { ModelLoader } from \"./utils/model-loader.js\";\nimport { PinkTrombone } from \"./pink-trombone/pink-trombone.js\";\nimport { MidiController } from \"./midi/midi-controller.js\";\nimport { MidiDropArea } from \"./midi/midi-drop-area.js\";\n\nclass JonTrombone {\n\n    constructor(container) {\n        this.container = container;\n        this.container.style.position = \"relative\";\n        this.container.style.cursor = \"default\";\n\n        // Set up renderer and embed in container\n        this.renderer = new THREE.WebGLRenderer( { alpha: true } );\n        this.renderer.setPixelRatio(window.devicePixelRatio);\n        this.renderer.setSize(this.container.offsetWidth, this.container.offsetHeight);\n        this.renderer.setClearColor(0x000000, 0);\n        this.container.appendChild(this.renderer.domElement);\n\n        // Set up scene and view\n        let aspect = this.container.offsetWidth / this.container.offsetHeight;\n        this.camera = new THREE.PerspectiveCamera( 45, aspect, 0.1, 100 );\n        this.scene = new THREE.Scene();\n\n        // Export scene for three js inspector\n        //window.scene = this.scene;\n\n        // Set up clock for timing\n        this.clock = new THREE.Clock();\n\n        let startDelayMS = 1000;\n        this.trombone = new PinkTrombone(this);\n        setTimeout(()=> {\n            this.trombone.StartAudio();\n            //this.trombone.SetMute(true);\n            this.moveJaw = true;\n        }, startDelayMS);\n\n        // Mute button for trombone\n        // let button = document.createElement(\"button\");\n        // button.innerHTML = \"Mute\";\n        // button.style.cssText = \"position: absolute; display: block; top: 0; left: 0;\";\n        // this.container.appendChild(button);\n        // button.addEventListener (\"click\", () => {\n        //     this.trombone.ToggleMute();\n        //     button.innerHTML = this.trombone.muted ? \"Unmute\" : \"Mute\";\n        // });\n\n        this.jawFlapSpeed = 20.0;\n        this.jawOpenOffset = 0.19;\n        this.moveJaw = false;\n        this.legato = false;\n        this.flapWhileSinging = false;\n\n        this.midiController = new MidiController(this);\n        let dropArea = new MidiDropArea(this);\n\n        this.SetUpThree();\n        this.SetUpScene();\n\n        // Start the update loop\n        this.OnUpdate();\n    }\n\n    /**\n     * Set up non-scene config for Three.js\n     */\n    SetUpThree() {\n        if(THREE.OrbitControls !== undefined){\n            // Add orbit controls\n            this.controls = new THREE.OrbitControls( this.camera, this.renderer.domElement );\n            this.controls.target.set( 0, 0, 0 );\n            this.controls.update();\n        } else {\n            console.warn(\"No THREE.OrbitControls detected. Include to allow interaction with the model.\");\n        }\n    }\n\n    /**\n     * Populates and configures objects within the scene.\n     */\n    SetUpScene() {\n\n        // Set camera position\n        this.camera.position.set( 0, 0, 0.5 );\n\n        // Lights\n        let light1 = new THREE.HemisphereLight(0xffffff, 0x444444, 1.0);\n        light1.name = \"Hemisphere Light\";\n        light1.position.set(0, 1, 0);\n        this.scene.add(light1);\n\n        let light2 = new THREE.DirectionalLight(0xffffff, 1.0);\n        light2.name = \"Directional Light\";\n        light2.position.set(0, 1, 0);\n        this.scene.add(light2);\n\n        // Load the Jon model and place it in the scene\n        ModelLoader.LoadJSON(\"../resources/jon/three/jon.json\", (object) => {\n            this.jon = object;\n            this.scene.add( this.jon );\n            this.jon.rotation.y = (THREE.Math.degToRad(15));\n\n            this.jaw = this.jon.skeleton.bones.find((obj) => {\n                return obj.name == \"Bone.006\";\n            });\n            if(this.jaw){\n                this.jawShutZ = this.jaw.position.z;\n            }\n        });\n\n\n    }\n\n    /**\n     * Called every frame. Continues indefinitely after being called once.\n     */\n    OnUpdate() {\n        let deltaTime = this.clock.getDelta();\n        requestAnimationFrame( this.OnUpdate.bind(this) );\n\n        if(this.midiController.playing){\n\n            this.notes = this.midiController.GetPitches();\n            if(this.notes != this.lastNotes){\n                // Do the note\n                if(this.notes !== undefined && this.notes.length != 0){ \n                    // Note on\n                    // Play frequency\n                    let note = this.notes[0];\n                    if(this.notes.length > 1){\n                        //console.log (\"chord\");\n                    }\n                    let freq = this.midiController.MIDIToFrequency(note.midi);\n                    //console.log(freq);\n                    this.trombone.Glottis.UIFrequency = freq;\n                    this.trombone.Glottis.loudness = note.velocity;\n                    // Open jaw\n                    this.jaw.position.z = this.jawShutZ + this.jawOpenOffset;\n                    this.trombone.TractUI.SetLipsClosed(0);\n\n                } else { \n                    // Note off\n                    if (!this.legato) this.trombone.Glottis.loudness = 0;\n                    // Close jaw\n                    this.jaw.position.z = this.jawShutZ;\n                    this.trombone.TractUI.SetLipsClosed(1);\n\n                }\n\n                this.lastNotes = this.notes;\n            }\n\n        }\n\n        if(this.jaw && this.moveJaw && (!this.midiController.playing || this.flapWhileSinging)){\n            let time = this.clock.getElapsedTime();// % 60;\n\n            // Move the jaw\n            let percent = (Math.sin(time * this.jawFlapSpeed) + 1.0) / 2.0;\n            this.jaw.position.z = this.jawShutZ + (percent * this.jawOpenOffset);\n\n            // Make the audio match the jaw position\n            this.trombone.TractUI.SetLipsClosed(1.0 - percent);\n\n        }\n\n        // Render\n        this.renderer.render(this.scene, this.camera);\n\n    }\n\n}\n\nexport { JonTrombone };","import { Detector } from \"./utils/webgl-detect.js\";\nimport { JonTrombone } from \"./jon-trombone.js\";\nimport { GUI } from \"./gui.js\";\n\n// Optionally bundle three.js as part of the project\n//import THREELib from \"three-js\";\n//var THREE = THREELib(); // return THREE JS\n\nlet container = document.getElementById(\"jon-trombone-container\");\n\nif ( !Detector.HasWebGL() ) {\n    //exit(\"WebGL is not supported on this browser.\");\n    console.log(\"WebGL is not supported on this browser.\");\n    container.innerHTML = Detector.GetErrorHTML();\n    container.classList.add(\"no-webgl\");\n}\nelse{\n    let jonTrombone = new JonTrombone(container);\n    GUI.Init(jonTrombone);\n}","let MidiConvert = require('midiconvert');\n\n/**\n * Simple class for MIDI playback.\n * The paradigm here's a bit weird; it's up to an external\n * source to actually produce audio. This class just manages\n * a timer, which GetPitch() reads to produce the \"current\"\n * note information. \n * \n * As an example of usage, jon-trombone calls PlaySong() to\n * begin, and then every frame uses GetPitch() to figure out\n * what the current frequency to produce is.\n */\nclass MidiController {\n\n    constructor(controller) {\n        this.controller = controller;\n\n        this.midi = null;\n\n        this.playing = false;\n        this.currentTrack = 5;\n\n        this.baseFreq = 440; //110 is A4\n\n        this.clock = new THREE.Clock(false);\n    }\n\n    /**\n     * Loads and parses a MIDI file.\n     */\n    LoadSong(path, callback){\n        this.Stop();\n        this.midi = null;\n        MidiConvert.load(path, (midi) => {\n            console.log(\"MIDI loaded.\");\n            this.midi = midi;\n            console.log(this.midi);\n            if(callback) callback(midi);\n        });\n    }\n\n    LoadSongDirect(file){\n        this.Stop();\n        this.midi = MidiConvert.parse(file);\n        console.log(\"MIDI loaded.\");\n        console.log(this.midi);\n    }\n\n    /**\n     * Gets the pitch for the specified track at the current time in the song.\n     */\n    GetPitch(trackIndex = this.currentTrack){\n        let time = this.GetSongProgress();\n\n        // Constrain track specified to valid range\n        trackIndex = Math.min(trackIndex, this.midi.tracks.length - 1);\n        trackIndex = Math.max(trackIndex, 0);\n\n        return this.midi.tracks[trackIndex].notes.find((item) => {\n            return item.noteOn <= time && time <= item.noteOff;\n        });\n    }\n\n    GetPitches(trackIndex = this.currentTrack){\n        let time = this.GetSongProgress();\n\n        // Constrain track specified to valid range\n        trackIndex = Math.min(trackIndex, this.midi.tracks.length - 1);\n        trackIndex = Math.max(trackIndex, 0);\n\n        return this.midi.tracks[trackIndex].notes.filter(item => \n            item.noteOn <= time && time <= item.noteOff);\n    }\n\n    PlaySong(track = 5){\n        if(this.playing){\n            return;\n        }\n\n        // If no song is specified, load a song\n        if(!this.midi){\n            console.log(\"No MIDI is loaded. Loading an example...\");\n            this.LoadSong('../resources/midi/un-owen-was-her.mid', () => {\n                this.PlaySong();\n            });\n            return;\n        }\n\n        // Turn off some stuff so the singing kind of sounds okay\n        this.EnterSingMode();\n\n        this.currentTrack = track;\n        this.clock.start();\n        this.playing = true;\n\n        console.log(\"Playback started.\");\n\n    }\n\n    GetSongProgress(){\n        return this.clock.getElapsedTime();\n    }\n\n    /**\n     * Converts from a MIDI note code to its corresponding frequency.\n     * @param {*} midiCode \n     */\n    MIDIToFrequency(midiCode){\n        return this.baseFreq * Math.pow(2, (midiCode - 69) / 12);\n    }\n\n    /**\n     * Restarts the playback.\n     */\n    Restart(){\n        console.log(\"Playback moved to beginning.\");\n        this.clock = new THREE.Clock();\n    }\n\n    /**\n     * Stops playback.\n     */\n    Stop() {\n        if(!this.playing){\n            return;\n        }\n        console.log(\"Playback stopped.\");\n        this.clock.stop();\n        this.playing = false;\n        this.ExitSingMode();\n    }\n\n    /**\n     * Sets up the trombone for singing.\n     */\n    EnterSingMode(){\n        if(this.backup_settings){\n            return;\n        }\n\n        this.backup_settings = {};\n\n        this.backup_settings[\"autoWobble\"] = this.controller.trombone.autoWobble;\n        this.controller.trombone.autoWobble = false;\n\n        this.backup_settings[\"addPitchVariance\"] = this.controller.trombone.Glottis.addPitchVariance;\n        this.controller.trombone.Glottis.addPitchVariance = false;\n\n        this.backup_settings[\"addTensenessVariance\"] = this.controller.trombone.Glottis.addTensenessVariance;\n        this.controller.trombone.Glottis.addTensenessVariance = false;\n\n        this.backup_settings[\"vibratoFrequency\"] = this.controller.trombone.Glottis.vibratoFrequency;\n        this.controller.trombone.Glottis.vibratoFrequency = 0;\n\n        this.backup_settings[\"frequency\"] = this.controller.trombone.Glottis.UIFrequency;\n\n        this.backup_settings[\"loudness\"] = this.controller.trombone.Glottis.loudness;\n    }\n\n    /**\n     * Restores the trombone to the state it was in before singing.\n     */\n    ExitSingMode(){\n        if(!this.backup_settings) {\n            return;\n        }\n        \n        this.controller.trombone.autoWobble = this.backup_settings[\"autoWobble\"];\n        this.controller.trombone.Glottis.addPitchVariance = this.backup_settings[\"addPitchVariance\"];\n        this.controller.trombone.Glottis.addTensenessVariance = this.backup_settings[\"addTensenessVariance\"];\n        this.controller.trombone.Glottis.vibratoFrequency = this.backup_settings[\"vibratoFrequency\"];\n        this.controller.trombone.Glottis.UIFrequency = this.backup_settings[\"frequency\"];\n        this.controller.trombone.Glottis.loudness = this.backup_settings[\"loudness\"];\n\n        this.backup_settings = null;\n    }\n\n}\n\nexport { MidiController };","\n/**\n * Drop-in drag and drop support for the MidiController\n */\nexport class MidiDropArea {\n    constructor(controller){\n        this.controller = controller;\n\n        this.dropArea = document.createElement(\"div\");\n\n        this.dropArea.style.position = \"absolute\";\n        this.dropArea.style.top = \"0\";\n        this.dropArea.style.left = \"0\";\n        this.dropArea.style.width = \"100%\";\n        this.dropArea.style.height = \"100%\";\n\n        this.MakeDroppable(this.dropArea, (files) => {\n            //read the file\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = (e) => {\n\t\t\t\tthis.controller.midiController.LoadSongDirect(reader.result);\n\t\t\t};\n\t\t\treader.readAsBinaryString(files[0]);\n        });\n\n        this.controller.container.appendChild(this.dropArea);\n\n    }\n\n    Callback(){\n        console.log(\"Callback\");\n    }\n\n    // From http://bitwiser.in/2015/08/08/creating-dropzone-for-drag-drop-file.html\n    MakeDroppable(element, callback) {\n\n        var input = document.createElement('input');\n        input.setAttribute('type', 'file');\n        input.setAttribute('multiple', true);\n        input.style.display = 'none';\n\n        input.addEventListener('change', triggerCallback);\n        element.appendChild(input);\n        \n        element.addEventListener('dragover', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            element.classList.add('dragover');\n        });\n\n        element.addEventListener('dragleave', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            element.classList.remove('dragover');\n        });\n\n        element.addEventListener('drop', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            element.classList.remove('dragover');\n            triggerCallback(e);\n        });\n        \n        // element.addEventListener('click', function() {\n        //     input.value = null;\n        //     input.click();\n        // });\n\n        function triggerCallback(e) {\n            var files;\n            if(e.dataTransfer) {\n            files = e.dataTransfer.files;\n            } else if(e.target) {\n            files = e.target.files;\n            }\n            callback.call(null, files);\n        }\n    }\n\n    \n}","class AudioSystem {  \n\n    constructor(trombone) {\n        this.trombone = trombone;\n\n        this.blockLength = 512;\n        this.blockTime = 1;\n        this.soundOn = false;\n\n    }\n\n    init() {\n        window.AudioContext = window.AudioContext||window.webkitAudioContext;\n        this.audioContext = new window.AudioContext();\n        this.trombone.sampleRate = this.audioContext.sampleRate;\n        \n        this.blockTime = this.blockLength/this.trombone.sampleRate;\n    }\n    \n    startSound() {\n        //scriptProcessor may need a dummy input channel on iOS\n        this.scriptProcessor = this.audioContext.createScriptProcessor(this.blockLength, 2, 1);\n        this.scriptProcessor.connect(this.audioContext.destination); \n        this.scriptProcessor.onaudioprocess = this.doScriptProcessor.bind(this);\n    \n        var whiteNoise = this.createWhiteNoiseNode(2 * this.trombone.sampleRate); // 2 seconds of noise\n        \n        var aspirateFilter = this.audioContext.createBiquadFilter();\n        aspirateFilter.type = \"bandpass\";\n        aspirateFilter.frequency.value = 500;\n        aspirateFilter.Q.value = 0.5;\n        whiteNoise.connect(aspirateFilter);  // Use white noise as input for filter\n        aspirateFilter.connect(this.scriptProcessor);  // Use this as input 0 for script processor\n        \n        var fricativeFilter = this.audioContext.createBiquadFilter();\n        fricativeFilter.type = \"bandpass\";\n        fricativeFilter.frequency.value = 1000;\n        fricativeFilter.Q.value = 0.5;\n        whiteNoise.connect(fricativeFilter);  // Use white noise as input\n        fricativeFilter.connect(this.scriptProcessor);  // Use this as input 1 for script processor\n        \n        whiteNoise.start(0);\n\n        // Generate just white noise (test)\n        // var wn = this.createWhiteNoiseNode(2*this.trombone.sampleRate);\n        // wn.connect(this.audioContext.destination);\n        // wn.start(0);\n    }\n    \n    createWhiteNoiseNode(frameCount) {\n        var myArrayBuffer = this.audioContext.createBuffer(1, frameCount, this.trombone.sampleRate);\n\n        var nowBuffering = myArrayBuffer.getChannelData(0);\n        for (var i = 0; i < frameCount; i++) \n        {\n            nowBuffering[i] = Math.random();// gaussian();\n        }\n\n        var source = this.audioContext.createBufferSource();\n        source.buffer = myArrayBuffer;\n        source.loop = true;\n\n        return source;\n    }\n\n    // createNode() {\n    //     let buffer = this.audioContext.createBuffer(1, frameCount, this.trombone.sampleRate);\n\n        \n\n    //     var source = this.audioContext.createBufferSource();\n    //     source.buffer = buffer;\n    //     source.loop = true;\n\n    //     return source;\n    // }\n    \n    \n    doScriptProcessor(event) {\n        var inputArray1 = event.inputBuffer.getChannelData(0);  // Glottis input\n        var inputArray2 = event.inputBuffer.getChannelData(1);  // Tract input\n        var outArray = event.outputBuffer.getChannelData(0);  // Output (mono)\n        for (var j = 0, N = outArray.length; j < N; j++)\n        {\n            var lambda1 = j/N;\n            var lambda2 = (j+0.5)/N;\n            var glottalOutput = this.trombone.Glottis.runStep(lambda1, inputArray1[j]); \n            \n            var vocalOutput = 0;\n            //Tract runs at twice the sample rate \n            this.trombone.Tract.runStep(glottalOutput, inputArray2[j], lambda1);\n            vocalOutput += this.trombone.Tract.lipOutput + this.trombone.Tract.noseOutput;\n            this.trombone.Tract.runStep(glottalOutput, inputArray2[j], lambda2);\n            vocalOutput += this.trombone.Tract.lipOutput + this.trombone.Tract.noseOutput;\n            outArray[j] = vocalOutput * 0.125;\n        }\n        // if(this.trombone.controller.notes !== undefined){\n        //     for (var noteIndex = 1; noteIndex < this.trombone.controller.notes.length; noteIndex++){\n        //         if(noteIndex > this.numVoices - 1) return;\n        //         let note = this.trombone.controller.notes[noteIndex];\n        //         //console.log(note);\n\n        //     }\n        // }\n        this.trombone.Glottis.finishBlock();\n        this.trombone.Tract.finishBlock();\n    }\n    \n    mute() {\n        this.scriptProcessor.disconnect();\n    }\n    \n    unmute() {\n        this.scriptProcessor.connect(this.audioContext.destination); \n    }\n    \n}\n\nexports.AudioSystem = AudioSystem;","import noise from \"../noise.js\";\n\nclass Glottis {\n\n    constructor(trombone) {\n        this.trombone = trombone;\n\n        this.timeInWaveform = 0;\n        this.oldFrequency = 140;\n        this.newFrequency = 140;\n        this.UIFrequency = 140;\n        this.smoothFrequency = 140;\n        this.oldTenseness = 0.6;\n        this.newTenseness = 0.6;\n        this.UITenseness = 0.6;\n        this.totalTime = 0;\n        this.vibratoAmount = 0.005;\n        this.vibratoFrequency = 6;\n        this.intensity = 0;\n        this.loudness = 1;\n        this.isTouched = false;\n        this.touch = 0;\n        this.x = 240;\n        this.y = 530;\n\n        this.keyboardTop = 500;\n        this.keyboardLeft = 0;\n        this.keyboardWidth = 600;\n        this.keyboardHeight = 100;\n        this.semitones = 20;\n        this.marks = [0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0];\n        this.baseNote = 87.3071; //F\n\n        this.output;\n\n        /// Allow pitch to wobble over time\n        this.addPitchVariance = true;\n        /// Allow tenseness to wobble over time\n        this.addTensenessVariance = true;\n\n    }\n    \n    init() {\n        this.setupWaveform(0);\n    }\n    \n    handleTouches() {\n        if (this.touch != 0 && !this.touch.alive) this.touch = 0;\n        \n        if (this.touch == 0)\n        {        \n            for (var j=0; j<UI.touchesWithMouse.length; j++)  \n            {\n                var touch = UI.touchesWithMouse[j];\n                if (!touch.alive) continue;\n                if (touch.y<this.keyboardTop) continue;\n                this.touch = touch;\n            }    \n        }\n        \n        if (this.touch != 0)\n        {\n            var local_y = this.touch.y -  this.keyboardTop-10;\n            var local_x = this.touch.x - this.keyboardLeft;\n            local_y = Math.clamp(local_y, 0, this.keyboardHeight-26);\n            var semitone = this.semitones * local_x / this.keyboardWidth + 0.5;\n            Glottis.UIFrequency = this.baseNote * Math.pow(2, semitone/12);\n            if (Glottis.intensity == 0) Glottis.smoothFrequency = Glottis.UIFrequency;\n            //Glottis.UIRd = 3*local_y / (this.keyboardHeight-20);\n            var t = Math.clamp(1-local_y / (this.keyboardHeight-28), 0, 1);\n            Glottis.UITenseness = 1-Math.cos(t*Math.PI*0.5);\n            Glottis.loudness = Math.pow(Glottis.UITenseness, 0.25);\n            this.x = this.touch.x;\n            this.y = local_y + this.keyboardTop+10;\n        }\n        Glottis.isTouched = (this.touch != 0);\n    }\n        \n    runStep(lambda, noiseSource) {\n        var timeStep = 1.0 / this.trombone.sampleRate;\n        this.timeInWaveform += timeStep;\n        this.totalTime += timeStep;\n        if (this.timeInWaveform > this.waveformLength) \n        {\n            this.timeInWaveform -= this.waveformLength;\n            this.setupWaveform(lambda);\n        }\n        var out = this.normalizedLFWaveform(this.timeInWaveform/this.waveformLength);\n        var aspiration = this.intensity*(1.0-Math.sqrt(this.UITenseness))*this.getNoiseModulator()*noiseSource;\n        aspiration *= 0.2 + 0.02 * noise.simplex1(this.totalTime * 1.99);\n        out += aspiration;\n        return out;\n    }\n    \n    getNoiseModulator() {\n        var voiced = 0.1+0.2*Math.max(0,Math.sin(Math.PI*2*this.timeInWaveform/this.waveformLength));\n        //return 0.3;\n        return this.UITenseness* this.intensity * voiced + (1-this.UITenseness* this.intensity ) * 0.3;\n    }\n    \n    finishBlock() {\n        var vibrato = 0;\n        if (this.addPitchVariance) {\n            // Add small imperfections to the vocal output\n            vibrato += this.vibratoAmount * Math.sin(2*Math.PI * this.totalTime *this.vibratoFrequency);          \n            vibrato += 0.02 * noise.simplex1(this.totalTime * 4.07);\n            vibrato += 0.04 * noise.simplex1(this.totalTime * 2.15);\n        }\n        \n        if (this.trombone.autoWobble)\n        {\n            vibrato += 0.2 * noise.simplex1(this.totalTime * 0.98);\n            vibrato += 0.4 * noise.simplex1(this.totalTime * 0.5);\n        }\n\n        if (this.UIFrequency>this.smoothFrequency) \n            this.smoothFrequency = Math.min(this.smoothFrequency * 1.1, this.UIFrequency);\n        if (this.UIFrequency<this.smoothFrequency) \n            this.smoothFrequency = Math.max(this.smoothFrequency / 1.1, this.UIFrequency);\n        this.oldFrequency = this.newFrequency;\n        this.newFrequency = this.smoothFrequency * (1+vibrato);\n        this.oldTenseness = this.newTenseness;\n\n        if (this.addTensenessVariance)\n            this.newTenseness = this.UITenseness + 0.1*noise.simplex1(this.totalTime*0.46)+0.05*noise.simplex1(this.totalTime*0.36);\n        else\n            this.newTenseness = this.UITenseness;\n\n        if (!this.isTouched && this.trombone.alwaysVoice) this.newTenseness += (3-this.UITenseness)*(1-this.intensity);\n        \n        if (this.isTouched || this.trombone.alwaysVoice)\n            this.intensity += 0.13;\n        this.intensity = Math.clamp(this.intensity, 0, 1);\n    }\n    \n    setupWaveform(lambda) {\n        this.frequency = this.oldFrequency*(1-lambda) + this.newFrequency*lambda;\n        var tenseness = this.oldTenseness*(1-lambda) + this.newTenseness*lambda;\n        this.Rd = 3*(1-tenseness);\n        this.waveformLength = 1.0/this.frequency;\n        \n        var Rd = this.Rd;\n        if (Rd<0.5) Rd = 0.5;\n        if (Rd>2.7) Rd = 2.7;\n        // normalized to time = 1, Ee = 1\n        var Ra = -0.01 + 0.048*Rd;\n        var Rk = 0.224 + 0.118*Rd;\n        var Rg = (Rk/4)*(0.5+1.2*Rk)/(0.11*Rd-Ra*(0.5+1.2*Rk));\n        \n        var Ta = Ra;\n        var Tp = 1 / (2*Rg);\n        var Te = Tp + Tp*Rk; //\n        \n        var epsilon = 1/Ta;\n        var shift = Math.exp(-epsilon * (1-Te));\n        var Delta = 1 - shift; //divide by this to scale RHS\n           \n        var RHSIntegral = (1/epsilon)*(shift - 1) + (1-Te)*shift;\n        RHSIntegral = RHSIntegral/Delta;\n        \n        var totalLowerIntegral = - (Te-Tp)/2 + RHSIntegral;\n        var totalUpperIntegral = -totalLowerIntegral;\n        \n        var omega = Math.PI/Tp;\n        var s = Math.sin(omega*Te);\n        var y = -Math.PI*s*totalUpperIntegral / (Tp*2);\n        var z = Math.log(y);\n        var alpha = z/(Tp/2 - Te);\n        var E0 = -1 / (s*Math.exp(alpha*Te));\n        this.alpha = alpha;\n        this.E0 = E0;\n        this.epsilon = epsilon;\n        this.shift = shift;\n        this.Delta = Delta;\n        this.Te=Te;\n        this.omega = omega;\n    }\n    \n \n    normalizedLFWaveform(t) {     \n        if (t>this.Te) this.output = (-Math.exp(-this.epsilon * (t-this.Te)) + this.shift)/this.Delta;\n        else this.output = this.E0 * Math.exp(this.alpha*t) * Math.sin(this.omega * t);\n     \n        return this.output * this.intensity * this.loudness;\n    }\n}\n\nexport { Glottis };","class TractUI\n{\n\n    constructor(trombone) {\n        this.trombone = trombone;\n        \n        this.originX = 340; \n        this.originY = 449; \n        this.radius = 298; \n        this.scale = 60;\n        this.tongueIndex = 12.9;\n        this.tongueDiameter = 2.43;\n        this.innerTongueControlRadius = 2.05;\n        this.outerTongueControlRadius = 3.5;\n        this.tongueTouch = 0;\n        this.angleScale = 0.64;\n        this.angleOffset = -0.24;\n        this.noseOffset = 0.8;\n        this.gridOffset = 1.7;\n\n        /// Final openness of the mouth (closer to 0 is more closed)\n        this.target = 0.1;\n        /// Index in the throat array to move to target\n        this.index = 42;\n        /// Number of throat segments to close around the index\n        this.radius = 0;\n    }\n    \n    init() {\n        let Tract = this.trombone.Tract;\n\n        this.setRestDiameter();\n        for (var i=0; i<Tract.n; i++) \n        {\n            Tract.diameter[i] = Tract.targetDiameter[i] = Tract.restDiameter[i];\n        }\n\n        this.tongueLowerIndexBound = Tract.bladeStart+2;\n        this.tongueUpperIndexBound = Tract.tipStart-3;\n        this.tongueIndexCentre = 0.5*(this.tongueLowerIndexBound+this.tongueUpperIndexBound);\n    }\n        \n    getIndex(x,y) {\n        let Tract = this.trombone.Tract;\n\n        var xx = x-this.originX; var yy = y-this.originY;\n        var angle = Math.atan2(yy, xx);\n        while (angle> 0) angle -= 2*Math.PI;\n        return (Math.PI + angle - this.angleOffset)*(Tract.lipStart-1) / (this.angleScale*Math.PI);\n    }\n\n    getDiameter(x,y) {\n        var xx = x-this.originX; var yy = y-this.originY;\n        return (this.radius-Math.sqrt(xx*xx + yy*yy))/this.scale;\n    }\n    \n    setRestDiameter() {\n        let Tract = this.trombone.Tract;\n\n        for (var i=Tract.bladeStart; i<Tract.lipStart; i++)\n        {\n            var t = 1.1 * Math.PI*(this.tongueIndex - i)/(Tract.tipStart - Tract.bladeStart);\n            var fixedTongueDiameter = 2+(this.tongueDiameter-2)/1.5;\n            var curve = (1.5-fixedTongueDiameter+this.gridOffset)*Math.cos(t);\n            if (i == Tract.bladeStart-2 || i == Tract.lipStart-1) curve *= 0.8;\n            if (i == Tract.bladeStart || i == Tract.lipStart-2) curve *= 0.94;               \n            Tract.restDiameter[i] = 1.5 - curve;\n        }\n    }\n\n    /**\n     * Sets the lips of the modeled tract to be closed by the specified amount.\n     * @param {number} progress Percentage closed (number between 0 and 1)\n     */\n    SetLipsClosed(progress) {\n\n        let Tract = this.trombone.Tract;\n        \n        this.setRestDiameter();\n        for (var i=0; i<Tract.n; i++) Tract.targetDiameter[i] = Tract.restDiameter[i];    \n\n        // Disable this behavior if the mouth is closed a certain amount\n        //if (progress > 0.8 || progress < 0.1) return;\n        \n        for(let i= this.index - this.radius; i <= this.index + this.radius; i++){\n            if (i > Tract.targetDiameter.length || i < 0) continue;\n            let interp = Math.lerp(Tract.restDiameter[i], this.target, progress);\n            Tract.targetDiameter[i] = interp;\n        }\n    }\n\n\n}\n\nexport { TractUI };","class Tract {\n\n    constructor(trombone) {\n        this.trombone = trombone;\n\n        this.n = 44;\n        this.bladeStart = 10;\n        this.tipStart = 32;\n        this.lipStart = 39;\n        this.R = []; //component going right\n        this.L = []; //component going left\n        this.reflection = [];\n        this.junctionOutputR = [];\n        this.junctionOutputL = [];\n        this.maxAmplitude = [];\n        this.diameter = [];\n        this.restDiameter = [];\n        this.targetDiameter = [];\n        this.newDiameter = [];\n        this.A = [];\n        this.glottalReflection = 0.75;\n        this.lipReflection = -0.85;\n        this.lastObstruction = -1;\n        this.fade = 1.0; //0.9999,\n        this.movementSpeed = 15; //cm per second\n        this.transients = [];\n        this.lipOutput = 0;\n        this.noseOutput = 0;\n        this.velumTarget = 0.01;\n    }\n\n    init() {\n        this.bladeStart = Math.floor(this.bladeStart*this.n/44);\n        this.tipStart = Math.floor(this.tipStart*this.n/44);\n        this.lipStart = Math.floor(this.lipStart*this.n/44);        \n        this.diameter = new Float64Array(this.n);\n        this.restDiameter = new Float64Array(this.n);\n        this.targetDiameter = new Float64Array(this.n);\n        this.newDiameter = new Float64Array(this.n);\n        for (var i=0; i<this.n; i++)\n        {\n            var diameter = 0;\n            if (i<7*this.n/44-0.5) diameter = 0.6;\n            else if (i<12*this.n/44) diameter = 1.1;\n            else diameter = 1.5;\n            this.diameter[i] = this.restDiameter[i] = this.targetDiameter[i] = this.newDiameter[i] = diameter;\n        }\n        this.R = new Float64Array(this.n);\n        this.L = new Float64Array(this.n);\n        this.reflection = new Float64Array(this.n+1);\n        this.newReflection = new Float64Array(this.n+1);\n        this.junctionOutputR = new Float64Array(this.n+1);\n        this.junctionOutputL = new Float64Array(this.n+1);\n        this.A =new Float64Array(this.n);\n        this.maxAmplitude = new Float64Array(this.n);\n        \n        this.noseLength = Math.floor(28*this.n/44)\n        this.noseStart = this.n-this.noseLength + 1;\n        this.noseR = new Float64Array(this.noseLength);\n        this.noseL = new Float64Array(this.noseLength);\n        this.noseJunctionOutputR = new Float64Array(this.noseLength+1);\n        this.noseJunctionOutputL = new Float64Array(this.noseLength+1);        \n        this.noseReflection = new Float64Array(this.noseLength+1);\n        this.noseDiameter = new Float64Array(this.noseLength);\n        this.noseA = new Float64Array(this.noseLength);\n        this.noseMaxAmplitude = new Float64Array(this.noseLength);\n        for (var i=0; i<this.noseLength; i++)\n        {\n            var diameter;\n            var d = 2*(i/this.noseLength);\n            if (d<1) diameter = 0.4+1.6*d;\n            else diameter = 0.5+1.5*(2-d);\n            diameter = Math.min(diameter, 1.9);\n            this.noseDiameter[i] = diameter;\n        }       \n        this.newReflectionLeft = this.newReflectionRight = this.newReflectionNose = 0;\n        this.calculateReflections();        \n        this.calculateNoseReflections();\n        this.noseDiameter[0] = this.velumTarget;\n    }\n    \n    reshapeTract(deltaTime) {\n        var amount = deltaTime * this.movementSpeed; ;    \n        var newLastObstruction = -1;\n        for (var i=0; i<this.n; i++)\n        {\n            var diameter = this.diameter[i];\n            var targetDiameter = this.targetDiameter[i];\n            if (diameter <= 0) newLastObstruction = i;\n            var slowReturn; \n            if (i<this.noseStart) slowReturn = 0.6;\n            else if (i >= this.tipStart) slowReturn = 1.0; \n            else slowReturn = 0.6+0.4*(i-this.noseStart)/(this.tipStart-this.noseStart);\n            this.diameter[i] = Math.moveTowards(diameter, targetDiameter, slowReturn*amount, 2*amount);\n        }\n        if (this.lastObstruction>-1 && newLastObstruction == -1 && this.noseA[0]<0.05)\n        {\n            this.addTransient(this.lastObstruction);\n        }\n        this.lastObstruction = newLastObstruction;\n        \n        amount = deltaTime * this.movementSpeed; \n        this.noseDiameter[0] = Math.moveTowards(this.noseDiameter[0], this.velumTarget, \n                amount*0.25, amount*0.1);\n        this.noseA[0] = this.noseDiameter[0]*this.noseDiameter[0];        \n    }\n    \n    calculateReflections() {\n        for (var i=0; i<this.n; i++) \n        {\n            this.A[i] = this.diameter[i]*this.diameter[i]; //ignoring PI etc.\n        }\n        for (var i=1; i<this.n; i++)\n        {\n            this.reflection[i] = this.newReflection[i];\n            if (this.A[i] == 0) this.newReflection[i] = 0.999; //to prevent some bad behaviour if 0\n            else this.newReflection[i] = (this.A[i-1]-this.A[i]) / (this.A[i-1]+this.A[i]); \n        }\n        \n        //now at junction with nose\n\n        this.reflectionLeft = this.newReflectionLeft;\n        this.reflectionRight = this.newReflectionRight;\n        this.reflectionNose = this.newReflectionNose;\n        var sum = this.A[this.noseStart]+this.A[this.noseStart+1]+this.noseA[0];\n        this.newReflectionLeft = (2*this.A[this.noseStart]-sum)/sum;\n        this.newReflectionRight = (2*this.A[this.noseStart+1]-sum)/sum;   \n        this.newReflectionNose = (2*this.noseA[0]-sum)/sum;      \n    }\n\n    calculateNoseReflections() {\n        for (var i=0; i<this.noseLength; i++) \n        {\n            this.noseA[i] = this.noseDiameter[i]*this.noseDiameter[i]; \n        }\n        for (var i=1; i<this.noseLength; i++)\n        {\n            this.noseReflection[i] = (this.noseA[i-1]-this.noseA[i]) / (this.noseA[i-1]+this.noseA[i]); \n        }\n    }\n    \n    runStep(glottalOutput, turbulenceNoise, lambda) {\n        var updateAmplitudes = (Math.random()<0.1);\n    \n        //mouth\n        this.processTransients();\n        this.addTurbulenceNoise(turbulenceNoise);\n        \n        //this.glottalReflection = -0.8 + 1.6 * Glottis.newTenseness;\n        this.junctionOutputR[0] = this.L[0] * this.glottalReflection + glottalOutput;\n        this.junctionOutputL[this.n] = this.R[this.n-1] * this.lipReflection; \n        \n        for (var i=1; i<this.n; i++)\n        {\n            var r = this.reflection[i] * (1-lambda) + this.newReflection[i]*lambda;\n            var w = r * (this.R[i-1] + this.L[i]);\n            this.junctionOutputR[i] = this.R[i-1] - w;\n            this.junctionOutputL[i] = this.L[i] + w;\n        }    \n        \n        //now at junction with nose\n        var i = this.noseStart;\n        var r = this.newReflectionLeft * (1-lambda) + this.reflectionLeft*lambda;\n        this.junctionOutputL[i] = r*this.R[i-1]+(1+r)*(this.noseL[0]+this.L[i]);\n        r = this.newReflectionRight * (1-lambda) + this.reflectionRight*lambda;\n        this.junctionOutputR[i] = r*this.L[i]+(1+r)*(this.R[i-1]+this.noseL[0]);     \n        r = this.newReflectionNose * (1-lambda) + this.reflectionNose*lambda;\n        this.noseJunctionOutputR[0] = r*this.noseL[0]+(1+r)*(this.L[i]+this.R[i-1]);\n         \n        for (var i=0; i<this.n; i++)\n        {          \n            this.R[i] = this.junctionOutputR[i]*0.999;\n            this.L[i] = this.junctionOutputL[i+1]*0.999; \n            \n            //this.R[i] = Math.clamp(this.junctionOutputR[i] * this.fade, -1, 1);\n            //this.L[i] = Math.clamp(this.junctionOutputL[i+1] * this.fade, -1, 1);    \n            \n            if (updateAmplitudes)\n            {   \n                var amplitude = Math.abs(this.R[i]+this.L[i]);\n                if (amplitude > this.maxAmplitude[i]) this.maxAmplitude[i] = amplitude;\n                else this.maxAmplitude[i] *= 0.999;\n            }\n        }\n\n        this.lipOutput = this.R[this.n-1];\n        \n        //nose     \n        this.noseJunctionOutputL[this.noseLength] = this.noseR[this.noseLength-1] * this.lipReflection; \n        \n        for (var i=1; i<this.noseLength; i++)\n        {\n            var w = this.noseReflection[i] * (this.noseR[i-1] + this.noseL[i]);\n            this.noseJunctionOutputR[i] = this.noseR[i-1] - w;\n            this.noseJunctionOutputL[i] = this.noseL[i] + w;\n        }\n        \n        for (var i=0; i<this.noseLength; i++)\n        {\n            this.noseR[i] = this.noseJunctionOutputR[i] * this.fade;\n            this.noseL[i] = this.noseJunctionOutputL[i+1] * this.fade;   \n            \n            //this.noseR[i] = Math.clamp(this.noseJunctionOutputR[i] * this.fade, -1, 1);\n            //this.noseL[i] = Math.clamp(this.noseJunctionOutputL[i+1] * this.fade, -1, 1);    \n            \n            if (updateAmplitudes)\n            {\n                var amplitude = Math.abs(this.noseR[i]+this.noseL[i]);\n                if (amplitude > this.noseMaxAmplitude[i]) this.noseMaxAmplitude[i] = amplitude;\n                else this.noseMaxAmplitude[i] *= 0.999;\n            }\n        }\n\n        this.noseOutput = this.noseR[this.noseLength-1];\n       \n    }\n    \n    finishBlock() {         \n        this.reshapeTract(this.trombone.AudioSystem.blockTime);\n        this.calculateReflections();\n    }\n    \n    addTransient(position) {\n        var trans = {}\n        trans.position = position;\n        trans.timeAlive = 0;\n        trans.lifeTime = 0.2;\n        trans.strength = 0.3;\n        trans.exponent = 200;\n        this.transients.push(trans);\n    }\n    \n    processTransients() {\n        for (var i = 0; i < this.transients.length; i++)  \n        {\n            var trans = this.transients[i];\n            var amplitude = trans.strength * Math.pow(2, -trans.exponent * trans.timeAlive);\n            this.R[trans.position] += amplitude/2;\n            this.L[trans.position] += amplitude/2;\n            trans.timeAlive += 1.0/(this.trombone.sampleRate*2);\n        }\n        for (var i=this.transients.length-1; i>=0; i--)\n        {\n            var trans = this.transients[i];\n            if (trans.timeAlive > trans.lifeTime)\n            {\n                this.transients.splice(i,1);\n            }\n        }\n    }\n    \n    addTurbulenceNoise(turbulenceNoise) {\n        // for (var j=0; j<UI.touchesWithMouse.length; j++)\n        // {\n        //     var touch = UI.touchesWithMouse[j];\n        //     if (touch.index<2 || touch.index>Tract.n) continue;\n        //     if (touch.diameter<=0) continue;            \n        //     var intensity = touch.fricative_intensity;\n        //     if (intensity == 0) continue;\n        //     this.addTurbulenceNoiseAtIndex(0.66*turbulenceNoise*intensity, touch.index, touch.diameter);\n        // }\n    }\n    \n    addTurbulenceNoiseAtIndex(turbulenceNoise, index, diameter) {   \n        var i = Math.floor(index);\n        var delta = index - i;\n        turbulenceNoise *= this.trombone.Glottis.getNoiseModulator();\n        var thinness0 = Math.clamp(8*(0.7-diameter),0,1);\n        var openness = Math.clamp(30*(diameter-0.3), 0, 1);\n        var noise0 = turbulenceNoise*(1-delta)*thinness0*openness;\n        var noise1 = turbulenceNoise*delta*thinness0*openness;\n        this.R[i+1] += noise0/2;\n        this.L[i+1] += noise0/2;\n        this.R[i+2] += noise1/2;\n        this.L[i+2] += noise1/2;\n    }\n};\n\nexport { Tract };","Math.clamp = function(number, min, max) {\n    if (number<min) return min;\n    else if (number>max) return max;\n    else return number;\n}\n\nMath.moveTowards = function(current, target, amount) {\n    if (current<target) return Math.min(current+amount, target);\n    else return Math.max(current-amount, target);\n}\n\nMath.moveTowards = function(current, target, amountUp, amountDown) {\n    if (current<target) return Math.min(current+amountUp, target);\n    else return Math.max(current-amountDown, target);\n}\n\nMath.gaussian = function() {\n    var s = 0;\n    for (var c=0; c<16; c++) s+=Math.random();\n    return (s-8)/4;\n}\n\nMath.lerp = function(a, b, t) {\n    return a + (b - a) * t;\n}","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nclass Grad {\n    constructor(x, y, z){\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    dot2(x, y){\n        return this.x*x + this.y*y;\n    }\n\n    dot3(x, y, z) {\n        return this.x*x + this.y*y + this.z*z;\n    };\n}\n\nclass Noise {\n    constructor() {\n        this.grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                      new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                      new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n        this.p = [151,160,137,91,90,15,\n            131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n            190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n            88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n            77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n            102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n            135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n            5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n            223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n            129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n            251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n            49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n            138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n\n        // To remove the need for index wrapping, double the permutation table length\n        this.perm = new Array(512);\n        this.gradP = new Array(512);\n\n        this.seed(Date.now());\n    }\n\n    seed(seed) {\n        if(seed > 0 && seed < 1) {\n            // Scale the seed out\n            seed *= 65536;\n        }\n\n        seed = Math.floor(seed);\n        if(seed < 256) {\n            seed |= seed << 8;\n        }\n\n        for(var i = 0; i < 256; i++) {\n            var v;\n            if (i & 1) {\n                v = this.p[i] ^ (seed & 255);\n            } else {\n                v = this.p[i] ^ ((seed>>8) & 255);\n            }\n\n            this.perm[i] = this.perm[i + 256] = v;\n            this.gradP[i] = this.gradP[i + 256] = this.grad3[v % 12];\n        }\n    };\n\n    // 2D simplex noise\n    simplex2(xin, yin) {\n        // Skewing and unskewing factors for 2, 3, and 4 dimensions\n        var F2 = 0.5*(Math.sqrt(3)-1);\n        var G2 = (3-Math.sqrt(3))/6;\n\n        var F3 = 1/3;\n        var G3 = 1/6;\n\n        var n0, n1, n2; // Noise contributions from the three corners\n        // Skew the input space to determine which simplex cell we're in\n        var s = (xin+yin)*F2; // Hairy factor for 2D\n        var i = Math.floor(xin+s);\n        var j = Math.floor(yin+s);\n        var t = (i+j)*G2;\n        var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n        var y0 = yin-j+t;\n        // For the 2D case, the simplex shape is an equilateral triangle.\n        // Determine which simplex we are in.\n        var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n        if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n            i1=1; j1=0;\n        } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n            i1=0; j1=1;\n        }\n        // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n        // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n        // c = (3-sqrt(3))/6\n        var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n        var y1 = y0 - j1 + G2;\n        var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n        var y2 = y0 - 1 + 2 * G2;\n        // Work out the hashed gradient indices of the three simplex corners\n        i &= 255;\n        j &= 255;\n        var gi0 = this.gradP[i+this.perm[j]];\n        var gi1 = this.gradP[i+i1+this.perm[j+j1]];\n        var gi2 = this.gradP[i+1+this.perm[j+1]];\n        // Calculate the contribution from the three corners\n        var t0 = 0.5 - x0*x0-y0*y0;\n        if(t0<0) {\n            n0 = 0;\n        } else {\n            t0 *= t0;\n            n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n        }\n        var t1 = 0.5 - x1*x1-y1*y1;\n        if(t1<0) {\n            n1 = 0;\n        } else {\n            t1 *= t1;\n            n1 = t1 * t1 * gi1.dot2(x1, y1);\n        }\n        var t2 = 0.5 - x2*x2-y2*y2;\n        if(t2<0) {\n            n2 = 0;\n        } else {\n            t2 *= t2;\n            n2 = t2 * t2 * gi2.dot2(x2, y2);\n        }\n        // Add contributions from each corner to get the final noise value.\n        // The result is scaled to return values in the interval [-1,1].\n        return 70 * (n0 + n1 + n2);\n    }\n    \n    simplex1(x){\n        return this.simplex2(x*1.2, -x*0.7);\n    }\n\n}\n\nconst singleton = new Noise();\nObject.freeze(singleton);\n\nexport default singleton;","import \"./math-extensions.js\";\n\nimport { AudioSystem } from \"./components/audio-system.js\";\nimport { Glottis } from \"./components/glottis.js\";\nimport { Tract } from \"./components/tract.js\";\nimport { TractUI } from \"./components/tract-ui.js\";\n\nclass PinkTrombone {\n    constructor(controller){\n        this.controller = controller;\n        \n        this.sampleRate = 0;\n        this.time = 0;\n        this.alwaysVoice = true;\n        this.autoWobble = true;\n        this.noiseFreq = 500;\n        this.noiseQ = 0.7;\n\n        this.AudioSystem = new AudioSystem(this);\n        this.AudioSystem.init();\n        \n        this.Glottis = new Glottis(this);\n        this.Glottis.init();\n\n        this.Tract = new Tract(this);\n        this.Tract.init();\n\n        this.TractUI = new TractUI(this);\n        this.TractUI.init();\n\n        //this.StartAudio();\n        //this.SetMute(true);\n    }\n\n    StartAudio() {\n        this.muted = false;\n        this.AudioSystem.startSound();\n    }\n\n    SetMute(doMute) {\n        doMute ? this.AudioSystem.mute() : this.AudioSystem.unmute();\n        this.muted = doMute;\n    }\n\n    ToggleMute() {\n        this.SetMute(!this.muted);\n    }\n\n}\n\nexport { PinkTrombone };","class ModelLoader {\n\n    /**\n     * Loads a model asynchronously. Expects an object containing\n     * the path to the object, the relative path of the OBJ file,\n     * and the relative path of the MTL file.\n     * \n     * An example:\n     * let modelInfo = {\n     *      path: \"../resources/obj/\",\n     *      objFile: \"test.obj\",\n     *      mtlFile: \"test.mtl\"\n     * }\n     */\n    static LoadOBJ(modelInfo, loadedCallback) {\n\n        var onProgress = function( xhr ) {\n            if ( xhr.lengthComputable ) {\n                var percentComplete = xhr.loaded / xhr.total * 100;\n                console.log( Math.round( percentComplete, 2 ) + '% downloaded' );\n            }\n        };\n        var onError = function( xhr ) {\n        };\n\n        var mtlLoader = new THREE.MTLLoader();\n        mtlLoader.setPath( modelInfo.path );\n\n        mtlLoader.load( modelInfo.mtlFile, ( materials ) => {\n            materials.preload();\n            var objLoader = new THREE.OBJLoader();\n            objLoader.setMaterials( materials );\n            objLoader.setPath( modelInfo.path );\n            objLoader.load( modelInfo.objFile, ( object ) => {\n                loadedCallback(object);\n            }, onProgress, onError );\n            \n        });\n\n    }\n\n    static LoadJSON(path, loadedCallback) {\n\n        var onProgress = function( xhr ) {\n            if ( xhr.lengthComputable ) {\n                var percentComplete = xhr.loaded / xhr.total * 100;\n                console.log( Math.round( percentComplete, 2 ) + '% downloaded' );\n            }\n        };\n        var onError = function( xhr ) {\n        };\n\n        var loader = new THREE.JSONLoader();\n        loader.load( path, ( geometry, materials ) => {\n            // Apply skinning to each material so the verts are affected by bone movement\n            for(let mat of materials){\n                mat.skinning = true;\n            }\n            let mesh = new THREE.SkinnedMesh( geometry, new THREE.MultiMaterial( materials ) );\n            mesh.name = \"Jon\";\n            loadedCallback(mesh);\n        }, onProgress, onError);\n    }\n\n    static LoadFBX(path, loadedCallback) {\n        let manager = new THREE.LoadingManager();\n        manager.onProgress = function( item, loaded, total ) {\n            console.log( item, loaded, total );\n        };\n\n        var onProgress = function( xhr ) {\n            if ( xhr.lengthComputable ) {\n                var percentComplete = xhr.loaded / xhr.total * 100;\n                console.log( Math.round( percentComplete, 2 ) + '% downloaded' );\n            }\n        };\n        var onError = function( xhr ) {\n        };\n\n        var loader = new THREE.FBXLoader( manager );\n        loader.load( path, ( object ) => {\n            loadedCallback(object);\n        }, onProgress, onError );\n    }\n\n}\n\nexport { ModelLoader };","class Detector {\n\n    //http://stackoverflow.com/questions/11871077/proper-way-to-detect-webgl-support\n    static HasWebGL() {\n        if (!!window.WebGLRenderingContext) {\n            var canvas = document.createElement(\"canvas\"),\n                    names = [\"webgl\", \"experimental-webgl\", \"moz-webgl\", \"webkit-3d\"],\n                context = false;\n\n            for(var i=0;i<4;i++) {\n                try {\n                    context = canvas.getContext(names[i]);\n                    if (context && typeof context.getParameter == \"function\") {\n                        // WebGL is enabled\n                        return true;\n                    }\n                } catch(e) {}\n            }\n\n            // WebGL is supported, but disabled\n            return false;\n        }\n        // WebGL not supported\n        return false;\n    }\n\n    static GetErrorHTML(message = null){\n        if(message == null){\n            message = `Your graphics card does not seem to support \n                        <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\">WebGL</a>. <br>\n                        Find out how to get it <a href=\"http://get.webgl.org/\">here</a>.`;\n        }\n        return `\n        <div class=\"no-webgl-support\">\n        <p style=\"text-align: center;\">${message}</p>\n        </div>\n        `\n    }\n\n}\n\nexport { Detector };","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.MidiConvert=e():t.MidiConvert=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(7),i=n(2),a={instrumentByPatchID:i.instrumentByPatchID,instrumentFamilyByID:i.instrumentFamilyByID,parse:function(t){return(new r.Midi).decode(t)},load:function(t,e){var n=(new r.Midi).load(t);return e&&n.then(e),n},create:function(){return new r.Midi}};e[\"default\"]=a,t.exports=a},function(t,e){\"use strict\";function n(t){return t.replace(/\\u0000/g,\"\")}function r(t,e){return 60/e.bpm*(t/e.PPQ)}function i(t){return\"number\"==typeof t}function a(t){return\"string\"==typeof t}function o(t){var e=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"],n=Math.floor(t/12)-1,r=t%12;return e[r]+n}var s=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i;return function(e){return a(e)&&t.test(e)}}(),u=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13};return function(n){var r=t.exec(n),i=r[1],a=r[2],o=e[i.toLowerCase()];return o+12*(parseInt(a)+1)}}();t.exports={cleanName:n,ticksToSeconds:r,isString:a,isNumber:i,isPitch:s,midiToPitch:o,pitchToMidi:u}},function(t,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.instrumentByPatchID=[\"acoustic grand piano\",\"bright acoustic piano\",\"electric grand piano\",\"honky-tonk piano\",\"electric piano 1\",\"electric piano 2\",\"harpsichord\",\"clavi\",\"celesta\",\"glockenspiel\",\"music box\",\"vibraphone\",\"marimba\",\"xylophone\",\"tubular bells\",\"dulcimer\",\"drawbar organ\",\"percussive organ\",\"rock organ\",\"church organ\",\"reed organ\",\"accordion\",\"harmonica\",\"tango accordion\",\"acoustic guitar (nylon)\",\"acoustic guitar (steel)\",\"electric guitar (jazz)\",\"electric guitar (clean)\",\"electric guitar (muted)\",\"overdriven guitar\",\"distortion guitar\",\"guitar harmonics\",\"acoustic bass\",\"electric bass (finger)\",\"electric bass (pick)\",\"fretless bass\",\"slap bass 1\",\"slap bass 2\",\"synth bass 1\",\"synth bass 2\",\"violin\",\"viola\",\"cello\",\"contrabass\",\"tremolo strings\",\"pizzicato strings\",\"orchestral harp\",\"timpani\",\"string ensemble 1\",\"string ensemble 2\",\"synthstrings 1\",\"synthstrings 2\",\"choir aahs\",\"voice oohs\",\"synth voice\",\"orchestra hit\",\"trumpet\",\"trombone\",\"tuba\",\"muted trumpet\",\"french horn\",\"brass section\",\"synthbrass 1\",\"synthbrass 2\",\"soprano sax\",\"alto sax\",\"tenor sax\",\"baritone sax\",\"oboe\",\"english horn\",\"bassoon\",\"clarinet\",\"piccolo\",\"flute\",\"recorder\",\"pan flute\",\"blown bottle\",\"shakuhachi\",\"whistle\",\"ocarina\",\"lead 1 (square)\",\"lead 2 (sawtooth)\",\"lead 3 (calliope)\",\"lead 4 (chiff)\",\"lead 5 (charang)\",\"lead 6 (voice)\",\"lead 7 (fifths)\",\"lead 8 (bass + lead)\",\"pad 1 (new age)\",\"pad 2 (warm)\",\"pad 3 (polysynth)\",\"pad 4 (choir)\",\"pad 5 (bowed)\",\"pad 6 (metallic)\",\"pad 7 (halo)\",\"pad 8 (sweep)\",\"fx 1 (rain)\",\"fx 2 (soundtrack)\",\"fx 3 (crystal)\",\"fx 4 (atmosphere)\",\"fx 5 (brightness)\",\"fx 6 (goblins)\",\"fx 7 (echoes)\",\"fx 8 (sci-fi)\",\"sitar\",\"banjo\",\"shamisen\",\"koto\",\"kalimba\",\"bag pipe\",\"fiddle\",\"shanai\",\"tinkle bell\",\"agogo\",\"steel drums\",\"woodblock\",\"taiko drum\",\"melodic tom\",\"synth drum\",\"reverse cymbal\",\"guitar fret noise\",\"breath noise\",\"seashore\",\"bird tweet\",\"telephone ring\",\"helicopter\",\"applause\",\"gunshot\"],e.instrumentFamilyByID=[\"piano\",\"chromatic percussion\",\"organ\",\"guitar\",\"bass\",\"strings\",\"ensemble\",\"brass\",\"reed\",\"pipe\",\"synth lead\",\"synth pad\",\"synth effects\",\"ethnic\",\"percussive\",\"sound effects\"]},function(t,e){\"use strict\";function n(t,e){var n=0,r=t.length,i=r;if(r>0&&t[r-1].time<=e)return r-1;for(;i>n;){var a=Math.floor(n+(i-n)/2),o=t[a],s=t[a+1];if(o.time===e){for(var u=a;u<t.length;u++){var c=t[u];c.time===e&&(a=u)}return a}if(o.time<e&&s.time>e)return a;o.time>e?i=a:o.time<e&&(n=a+1)}return-1}function r(t,e){if(t.length){var r=n(t,e.time);t.splice(r+1,0,e)}else t.push(e)}Object.defineProperty(e,\"__esModule\",{value:!0}),e.BinaryInsert=r},function(t,e){\"use strict\";function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i={1:\"modulationWheel\",2:\"breath\",4:\"footController\",5:\"portamentoTime\",7:\"volume\",8:\"balance\",10:\"pan\",64:\"sustain\",65:\"portamentoTime\",66:\"sostenuto\",67:\"softPedal\",68:\"legatoFootswitch\",84:\"portamentoContro\"},a=function(){function t(e,r,i){n(this,t),this.number=e,this.time=r,this.value=i}return r(t,[{key:\"name\",get:function(){return i.hasOwnProperty(this.number)?i[this.number]:void 0}}]),t}();e.Control=a},function(t,e){\"use strict\";function n(t){for(var e={PPQ:t.header.ticksPerBeat},n=0;n<t.tracks.length;n++)for(var r=t.tracks[n],i=0;i<r.length;i++){var a=r[i];\"meta\"===a.type&&(\"timeSignature\"===a.subtype?e.timeSignature=[a.numerator,a.denominator]:\"setTempo\"===a.subtype&&(e.bpm||(e.bpm=6e7/a.microsecondsPerBeat)))}return e.bpm=e.bpm||120,e}Object.defineProperty(e,\"__esModule\",{value:!0}),e.parseHeader=n},function(t,e){\"use strict\";function n(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r.length>i)return!0}return!1}function r(t,e,n){for(var r=0,i=1/0,a=0;a<t.length;a++){var o=t[a],s=e[a];o[s]&&o[s].time<i&&(r=a,i=o[s].time)}n[r](t[r][e[r]]),e[r]+=1}function i(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];for(var a=e.filter(function(t,e){return e%2===0}),o=new Uint32Array(a.length),s=e.filter(function(t,e){return e%2===1});n(a,o);)r(a,o,s)}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Merge=i},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{\"default\":t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Midi=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(11),s=r(o),u=n(10),c=r(u),h=n(1),f=r(h),d=n(9),l=n(5),p=function(){function t(){i(this,t),this.header={bpm:120,timeSignature:[4,4],PPQ:480},this.tracks=[]}return a(t,[{key:\"load\",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"GET\";return new Promise(function(i,a){var o=new XMLHttpRequest;o.open(r,t),o.responseType=\"arraybuffer\",o.addEventListener(\"load\",function(){4===o.readyState&&200===o.status?i(e.decode(o.response)):a(o.status)}),o.addEventListener(\"error\",a),o.send(n)})}},{key:\"decode\",value:function(t){var e=this;if(t instanceof ArrayBuffer){var n=new Uint8Array(t);t=String.fromCharCode.apply(null,n)}var r=(0,s[\"default\"])(t);return this.header=(0,l.parseHeader)(r),this.tracks=[],r.tracks.forEach(function(t){var n=new d.Track;e.tracks.push(n);var r=0;t.forEach(function(t){r+=f[\"default\"].ticksToSeconds(t.deltaTime,e.header),\"meta\"===t.type&&\"trackName\"===t.subtype?n.name=f[\"default\"].cleanName(t.text):\"noteOn\"===t.subtype?n.noteOn(t.noteNumber,r,t.velocity/127):\"noteOff\"===t.subtype?n.noteOff(t.noteNumber,r):\"controller\"===t.subtype&&t.controllerType?n.cc(t.controllerType,r,t.value/127):\"meta\"===t.type&&\"instrumentName\"===t.subtype?n.instrument=t.text:\"channel\"===t.type&&\"programChange\"===t.subtype&&n.patch(t.programNumber)})}),this}},{key:\"encode\",value:function(){var t=this,e=new c[\"default\"].File({ticks:this.header.PPQ});return this.tracks.forEach(function(n,r){var i=e.addTrack();i.setTempo(t.bpm),n.encode(i,t.header)}),e.toBytes()}},{key:\"toArray\",value:function(){for(var t=this.encode(),e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}},{key:\"track\",value:function e(t){var e=new d.Track(t);return this.tracks.push(e),e}},{key:\"get\",value:function(t){return f[\"default\"].isNumber(t)?this.tracks[t]:this.tracks.find(function(e){return e.name===t})}},{key:\"slice\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,r=new t;return r.header=this.header,r.tracks=this.tracks.map(function(t){return t.slice(e,n)}),r}},{key:\"startTime\",get:function(){var t=this.tracks.map(function(t){return t.startTime});return Math.min.apply(Math,t)}},{key:\"bpm\",get:function(){return this.header.bpm},set:function(t){var e=this.header.bpm;this.header.bpm=t;var n=e/t;this.tracks.forEach(function(t){return t.scale(n)})}},{key:\"timeSignature\",get:function(){return this.header.timeSignature},set:function(t){this.header.timeSignature=timeSignature}},{key:\"duration\",get:function(){var t=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,t)}}]),t}();e.Midi=p},function(t,e,n){\"use strict\";function r(t){return t&&t.__esModule?t:{\"default\":t}}function i(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Note=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),s=r(o),u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(i(this,t),this.midi,s[\"default\"].isNumber(e))this.midi=e;else{if(!s[\"default\"].isPitch(e))throw new Error(\"the midi value must either be in Pitch Notation (e.g. C#4) or a midi value\");this.name=e}this.time=n,this.duration=r,this.velocity=a}return a(t,[{key:\"match\",value:function(t){return s[\"default\"].isNumber(t)?this.midi===t:s[\"default\"].isPitch(t)?this.name.toLowerCase()===t.toLowerCase():void 0}},{key:\"toJSON\",value:function(){return{name:this.name,midi:this.midi,time:this.time,velocity:this.velocity,duration:this.duration}}},{key:\"name\",get:function(){return s[\"default\"].midiToPitch(this.midi)},set:function(t){this.midi=s[\"default\"].pitchToMidi(t)}},{key:\"noteOn\",get:function(){return this.time},set:function(t){this.time=t}},{key:\"noteOff\",get:function(){return this.time+this.duration},set:function(t){this.duration=t-this.time}}]),t}();e.Note=u},function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(e,\"__esModule\",{value:!0}),e.Track=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=n(4),s=n(6),u=n(8),c=n(2),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"\",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;r(this,t),this.name=e,this.notes=[],this.controlChanges={},this.instrumentNumber=n}return i(t,[{key:\"note\",value:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=new u.Note(t,n,r,i);return(0,a.BinaryInsert)(this.notes,e),this}},{key:\"noteOn\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new u.Note(t,e,0,n);return(0,a.BinaryInsert)(this.notes,r),this}},{key:\"noteOff\",value:function(t,e){for(var n=0;n<this.notes.length;n++){var r=this.notes[n];if(r.match(t)&&0===r.duration){r.noteOff=e;break}}return this}},{key:\"cc\",value:function n(t,e,r){this.controlChanges.hasOwnProperty(t)||(this.controlChanges[t]=[]);var n=new o.Control(t,e,r);return(0,a.BinaryInsert)(this.controlChanges[t],n),this}},{key:\"patch\",value:function(t){return this.instrumentNumber=t,this}},{key:\"scale\",value:function(t){return this.notes.forEach(function(e){e.time*=t,e.duration*=t}),this}},{key:\"slice\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,r=Math.max(this.notes.findIndex(function(t){return t.time>=e}),0),i=this.notes.findIndex(function(t){return t.noteOff>=n})+1,a=new t(this.name);return a.notes=this.notes.slice(r,i),a.notes.forEach(function(t){return t.time=t.time-e}),a}},{key:\"encode\",value:function(t,e){function n(t){var e=Math.floor(r*t),n=Math.max(e-i,0);return i=e,n}var r=e.PPQ/(60/e.bpm),i=0,a=0;-1!==this.instrumentNumber&&t.instrument(a,this.instrumentNumber),(0,s.Merge)(this.noteOns,function(e){t.addNoteOn(a,e.name,n(e.time),Math.floor(127*e.velocity))},this.noteOffs,function(e){t.addNoteOff(a,e.name,n(e.time))})}},{key:\"noteOns\",get:function(){var t=[];return this.notes.forEach(function(e){t.push({time:e.noteOn,midi:e.midi,name:e.name,velocity:e.velocity})}),t}},{key:\"noteOffs\",get:function(){var t=[];return this.notes.forEach(function(e){t.push({time:e.noteOff,midi:e.midi,name:e.name})}),t}},{key:\"length\",get:function(){return this.notes.length}},{key:\"startTime\",get:function(){if(this.notes.length){var t=this.notes[0];return t.noteOn}return 0}},{key:\"duration\",get:function(){if(this.notes.length){var t=this.notes[this.notes.length-1];return t.noteOff}return 0}},{key:\"instrument\",get:function(){return c.instrumentByPatchID[this.instrumentNumber]},set:function(t){var e=c.instrumentByPatchID.indexOf(t);-1!==e&&(this.instrumentNumber=e)}},{key:\"instrumentFamily\",get:function(){return c.instrumentFamilyByID[Math.floor(this.instrumentNumber/8)]}}]),t}();e.Track=h},function(t,e,n){(function(t){var n={};!function(t){var e=t.DEFAULT_VOLUME=90,n=(t.DEFAULT_DURATION=128,t.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(t){var e=/([a-g])(#+|b+)?([0-9]+)$/i.exec(t),r=e[1].toLowerCase(),i=e[2]||\"\",a=parseInt(e[3],10);return 12*a+n.midi_letter_pitches[r]+(\"#\"==i.substr(0,1)?1:-1)*i.length},ensureMidiPitch:function(t){return\"number\"!=typeof t&&/[^0-9]/.test(t)?n.midiPitchFromNote(t):parseInt(t,10)},midi_pitches_letter:{12:\"c\",13:\"c#\",14:\"d\",15:\"d#\",16:\"e\",17:\"f\",18:\"f#\",19:\"g\",20:\"g#\",21:\"a\",22:\"a#\",23:\"b\"},midi_flattened_notes:{\"a#\":\"bb\",\"c#\":\"db\",\"d#\":\"eb\",\"f#\":\"gb\",\"g#\":\"ab\"},noteFromMidiPitch:function(t,e){var r,i=0,a=t,e=e||!1;return t>23&&(i=Math.floor(t/12)-1,a=t-12*i),r=n.midi_pitches_letter[a],e&&r.indexOf(\"#\")>0&&(r=n.midi_flattened_notes[r]),r+i},mpqnFromBpm:function(t){var e=Math.floor(6e7/t),n=[];do n.unshift(255&e),e>>=8;while(e);for(;n.length<3;)n.push(0);return n},bpmFromMpqn:function(t){var e=t;if(\"undefined\"!=typeof t[0]){e=0;for(var n=0,r=t.length-1;r>=0;++n,--r)e|=t[n]<<r}return Math.floor(6e7/t)},codes2Str:function(t){return String.fromCharCode.apply(null,t)},str2Bytes:function(t,e){if(e)for(;t.length/2<e;)t=\"0\"+t;for(var n=[],r=t.length-1;r>=0;r-=2){var i=0===r?t[r]:t[r-1]+t[r];n.unshift(parseInt(i,16))}return n},translateTickTime:function(t){for(var e=127&t;t>>=7;)e<<=8,e|=127&t|128;for(var n=[];;){if(n.push(255&e),!(128&e))break;e>>=8}return n}}),r=function(t){return this?void(!t||null===t.type&&void 0===t.type||null===t.channel&&void 0===t.channel||null===t.param1&&void 0===t.param1||(this.setTime(t.time),this.setType(t.type),this.setChannel(t.channel),this.setParam1(t.param1),this.setParam2(t.param2))):new r(t)};r.NOTE_OFF=128,r.NOTE_ON=144,r.AFTER_TOUCH=160,r.CONTROLLER=176,r.PROGRAM_CHANGE=192,r.CHANNEL_AFTERTOUCH=208,r.PITCH_BEND=224,r.prototype.setTime=function(t){this.time=n.translateTickTime(t||0)},r.prototype.setType=function(t){if(t<r.NOTE_OFF||t>r.PITCH_BEND)throw new Error(\"Trying to set an unknown event: \"+t);this.type=t},r.prototype.setChannel=function(t){if(0>t||t>15)throw new Error(\"Channel is out of bounds.\");this.channel=t},r.prototype.setParam1=function(t){this.param1=t},r.prototype.setParam2=function(t){this.param2=t},r.prototype.toBytes=function(){var t=[],e=this.type|15&this.channel;return t.push.apply(t,this.time),t.push(e),t.push(this.param1),void 0!==this.param2&&null!==this.param2&&t.push(this.param2),t};var i=function(t){if(!this)return new i(t);this.setTime(t.time),this.setType(t.type),this.setData(t.data)};i.SEQUENCE=0,i.TEXT=1,i.COPYRIGHT=2,i.TRACK_NAME=3,i.INSTRUMENT=4,i.LYRIC=5,i.MARKER=6,i.CUE_POINT=7,i.CHANNEL_PREFIX=32,i.END_OF_TRACK=47,i.TEMPO=81,i.SMPTE=84,i.TIME_SIG=88,i.KEY_SIG=89,i.SEQ_EVENT=127,i.prototype.setTime=function(t){this.time=n.translateTickTime(t||0)},i.prototype.setType=function(t){this.type=t},i.prototype.setData=function(t){this.data=t},i.prototype.toBytes=function(){if(!this.type)throw new Error(\"Type for meta-event not specified.\");var t=[];if(t.push.apply(t,this.time),t.push(255,this.type),Array.isArray(this.data))t.push(this.data.length),t.push.apply(t,this.data);else if(\"number\"==typeof this.data)t.push(1,this.data);else if(null!==this.data&&void 0!==this.data){t.push(this.data.length);var e=this.data.split(\"\").map(function(t){return t.charCodeAt(0)});t.push.apply(t,e)}else t.push(0);return t};var a=function(t){if(!this)return new a(t);var e=t||{};this.events=e.events||[]};a.START_BYTES=[77,84,114,107],a.END_BYTES=[0,255,47,0],a.prototype.addEvent=function(t){return this.events.push(t),this},a.prototype.addNoteOn=a.prototype.noteOn=function(t,i,a,o){return this.events.push(new r({type:r.NOTE_ON,channel:t,param1:n.ensureMidiPitch(i),param2:o||e,time:a||0})),this},a.prototype.addNoteOff=a.prototype.noteOff=function(t,i,a,o){return this.events.push(new r({type:r.NOTE_OFF,channel:t,param1:n.ensureMidiPitch(i),param2:o||e,time:a||0})),this},a.prototype.addNote=a.prototype.note=function(t,e,n,r,i){return this.noteOn(t,e,r,i),n&&this.noteOff(t,e,n,i),this},a.prototype.addChord=a.prototype.chord=function(t,e,n,r){if(!Array.isArray(e)&&!e.length)throw new Error(\"Chord must be an array of pitches\");return e.forEach(function(e){this.noteOn(t,e,0,r)},this),e.forEach(function(e,r){0===r?this.noteOff(t,e,n):this.noteOff(t,e)},this),this},a.prototype.setInstrument=a.prototype.instrument=function(t,e,n){return this.events.push(new r({type:r.PROGRAM_CHANGE,channel:t,param1:e,time:n||0})),this},a.prototype.setTempo=a.prototype.tempo=function(t,e){return this.events.push(new i({type:i.TEMPO,data:n.mpqnFromBpm(t),time:e||0})),this},a.prototype.toBytes=function(){var t=0,e=[],r=a.START_BYTES,i=a.END_BYTES,o=function(n){var r=n.toBytes();t+=r.length,e.push.apply(e,r)};this.events.forEach(o),t+=i.length;var s=n.str2Bytes(t.toString(16),4);return r.concat(s,e,i)};var o=function(t){if(!this)return new o(t);var e=t||{};if(e.ticks){if(\"number\"!=typeof e.ticks)throw new Error(\"Ticks per beat must be a number!\");if(e.ticks<=0||e.ticks>=32768||e.ticks%1!==0)throw new Error(\"Ticks per beat must be an integer between 1 and 32767!\")}this.ticks=e.ticks||128,this.tracks=e.tracks||[]};o.HDR_CHUNKID=\"MThd\",o.HDR_CHUNK_SIZE=\"\\x00\\x00\\x00\u0006\",o.HDR_TYPE0=\"\\x00\\x00\",o.HDR_TYPE1=\"\\x00\u0001\",o.prototype.addTrack=function(t){return t?(this.tracks.push(t),this):(t=new a,this.tracks.push(t),t)},o.prototype.toBytes=function(){var t=this.tracks.length.toString(16),e=o.HDR_CHUNKID+o.HDR_CHUNK_SIZE;return e+=parseInt(t,16)>1?o.HDR_TYPE1:o.HDR_TYPE0,e+=n.codes2Str(n.str2Bytes(t,2)),e+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach(function(t){e+=n.codes2Str(t.toBytes())}),e},t.Util=n,t.File=o,t.Track=a,t.Event=r,t.MetaEvent=i}(n),\"undefined\"!=typeof t&&null!==t?t.exports=n:\"undefined\"!=typeof e&&null!==e?e=n:this.Midi=n}).call(e,n(12)(t))},function(t,e){function n(t){function e(t){var e=t.read(4),n=t.readInt32();return{id:e,length:n,data:t.read(n)}}function n(t){var e={};e.deltaTime=t.readVarInt();var n=t.readInt8();if(240==(240&n)){if(255==n){e.type=\"meta\";var r=t.readInt8(),a=t.readVarInt();switch(r){case 0:if(e.subtype=\"sequenceNumber\",2!=a)throw\"Expected length for sequenceNumber event is 2, got \"+a;return e.number=t.readInt16(),e;case 1:return e.subtype=\"text\",e.text=t.read(a),e;case 2:return e.subtype=\"copyrightNotice\",e.text=t.read(a),e;case 3:return e.subtype=\"trackName\",e.text=t.read(a),e;case 4:return e.subtype=\"instrumentName\",e.text=t.read(a),e;case 5:return e.subtype=\"lyrics\",e.text=t.read(a),e;case 6:return e.subtype=\"marker\",e.text=t.read(a),e;case 7:return e.subtype=\"cuePoint\",e.text=t.read(a),e;case 32:if(e.subtype=\"midiChannelPrefix\",1!=a)throw\"Expected length for midiChannelPrefix event is 1, got \"+a;return e.channel=t.readInt8(),e;case 47:if(e.subtype=\"endOfTrack\",0!=a)throw\"Expected length for endOfTrack event is 0, got \"+a;return e;case 81:if(e.subtype=\"setTempo\",3!=a)throw\"Expected length for setTempo event is 3, got \"+a;return e.microsecondsPerBeat=(t.readInt8()<<16)+(t.readInt8()<<8)+t.readInt8(),e;case 84:if(e.subtype=\"smpteOffset\",5!=a)throw\"Expected length for smpteOffset event is 5, got \"+a;var o=t.readInt8();return e.frameRate={0:24,32:25,64:29,96:30}[96&o],e.hour=31&o,e.min=t.readInt8(),e.sec=t.readInt8(),e.frame=t.readInt8(),e.subframe=t.readInt8(),e;case 88:if(e.subtype=\"timeSignature\",4!=a)throw\"Expected length for timeSignature event is 4, got \"+a;return e.numerator=t.readInt8(),e.denominator=Math.pow(2,t.readInt8()),e.metronome=t.readInt8(),e.thirtyseconds=t.readInt8(),e;case 89:if(e.subtype=\"keySignature\",2!=a)throw\"Expected length for keySignature event is 2, got \"+a;return e.key=t.readInt8(!0),e.scale=t.readInt8(),e;case 127:return e.subtype=\"sequencerSpecific\",e.data=t.read(a),e;default:return e.subtype=\"unknown\",e.data=t.read(a),e}return e.data=t.read(a),e}if(240==n){e.type=\"sysEx\";var a=t.readVarInt();return e.data=t.read(a),e}if(247==n){e.type=\"dividedSysEx\";var a=t.readVarInt();return e.data=t.read(a),e}throw\"Unrecognised MIDI event type byte: \"+n}var s;0==(128&n)?(s=n,n=i):(s=t.readInt8(),i=n);var u=n>>4;switch(e.channel=15&n,e.type=\"channel\",u){case 8:return e.subtype=\"noteOff\",e.noteNumber=s,e.velocity=t.readInt8(),e;case 9:return e.noteNumber=s,e.velocity=t.readInt8(),0==e.velocity?e.subtype=\"noteOff\":e.subtype=\"noteOn\",e;case 10:return e.subtype=\"noteAftertouch\",e.noteNumber=s,e.amount=t.readInt8(),e;case 11:return e.subtype=\"controller\",e.controllerType=s,e.value=t.readInt8(),e;case 12:return e.subtype=\"programChange\",e.programNumber=s,e;case 13:return e.subtype=\"channelAftertouch\",e.amount=s,e;case 14:return e.subtype=\"pitchBend\",e.value=s+(t.readInt8()<<7),e;default:throw\"Unrecognised MIDI event type: \"+u}}var i;stream=r(t);var a=e(stream);if(\"MThd\"!=a.id||6!=a.length)throw\"Bad .mid file - header not found\";var o=r(a.data),s=o.readInt16(),u=o.readInt16(),c=o.readInt16();if(32768&c)throw\"Expressing time division in SMTPE frames is not supported yet\";ticksPerBeat=c;for(var h={formatType:s,trackCount:u,ticksPerBeat:ticksPerBeat},f=[],d=0;d<h.trackCount;d++){f[d]=[];var l=e(stream);if(\"MTrk\"!=l.id)throw\"Unexpected chunk - expected MTrk, got \"+l.id;for(var p=r(l.data);!p.eof();){var m=n(p);f[d].push(m)}}return{header:h,tracks:f}}function r(t){function e(e){var n=t.substr(s,e);return s+=e,n}function n(){var e=(t.charCodeAt(s)<<24)+(t.charCodeAt(s+1)<<16)+(t.charCodeAt(s+2)<<8)+t.charCodeAt(s+3);return s+=4,e}function r(){var e=(t.charCodeAt(s)<<8)+t.charCodeAt(s+1);return s+=2,e}function i(e){var n=t.charCodeAt(s);return e&&n>127&&(n-=256),s+=1,n}function a(){return s>=t.length}function o(){for(var t=0;;){var e=i();if(!(128&e))return t+e;t+=127&e,t<<=7}}var s=0;return{eof:a,read:e,readInt32:n,readInt16:r,readInt8:i,readVarInt:o}}t.exports=function(t){return n(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});\n//# sourceMappingURL=MidiConvert.js.map"]}